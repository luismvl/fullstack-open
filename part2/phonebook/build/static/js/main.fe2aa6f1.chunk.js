(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(15),c=n.n(o),u=n(3),a=n(0),i=function(e){var t=e.setFilter;return Object(a.jsx)("input",{onChange:function(e){return t(e.target.value)}})},s=function(e){var t=e.addPerson,n=e.setNewName,r=e.setNewNumber,o=e.newName,c=e.newNumber;return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{onChange:function(e){return n(e.target.value)},value:o})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{onChange:function(e){return r(e.target.value)},value:c})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var t=e.persons,n=e.handleDelete;return Object(a.jsx)("div",{children:t.map((function(e){return Object(a.jsxs)("p",{children:[e.name," ",e.number,Object(a.jsx)("button",{onClick:function(){return n(e.id)},children:"detele"})]},e.id)}))})},f=n(4),l=n.n(f),b="/api/persons",j={getAll:function(){return l.a.get(b).then((function(e){return e.data}))},create:function(e){return l.a.post(b,e).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return l.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))}},m=function(e){var t=e.message,n=e.type;if(!t)return null;var r={backgroundColor:"lightgrey",padding:10,fontSize:20,borderRadius:5,color:"DarkSlateGrey",border:"3px solid DarkSlateGrey",marginBottom:16};return"succes"===n&&(r.color="green",r.borderColor="green"),"error"===n&&(r.color="red",r.borderColor="red"),Object(a.jsx)("div",{style:r,children:t})},p=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1];Object(r.useEffect)((function(){j.getAll().then((function(e){return o(e)}))}),[]);var c=Object(r.useState)(""),f=Object(u.a)(c,2),l=f[0],b=f[1],p=Object(r.useState)(""),h=Object(u.a)(p,2),x=h[0],O=h[1],v=Object(r.useState)(""),y=Object(u.a)(v,2),g=y[0],w=y[1],N=Object(r.useState)({text:"",type:""}),k=Object(u.a)(N,2),S=k[0],C=k[1],D=n.filter((function(e){return e.name.toLowerCase().indexOf(g.toLowerCase())>-1}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(m,{message:S.text,type:S.type}),"Search",Object(a.jsx)(i,{setFilter:w}),Object(a.jsx)("h3",{children:"Add new"}),Object(a.jsx)(s,{addPerson:function(e){e.preventDefault();var t={name:l,number:x},r=n.find((function(e){return e.name===t.name})),c="".concat(l," is already added to phonebook, replace the old number with a new one?");r&&window.confirm(c)?j.update(r.id,t).then((function(e){o(n.map((function(t){return t.id!==e.id?t:e}))),C({text:"Updated ".concat(l),type:"success"}),setTimeout((function(){return C({text:"",type:""})}),5e3)})).catch((function(){C({text:"Information of ".concat(l," has already been remove from server"),type:"error"}),setTimeout((function(){return C({text:"",type:""})}),5e3),o(n.filter((function(e){return e.id!==r.id})))})):j.create(t).then((function(e){o(n.concat(e)),C({text:"Added ".concat(e.name),type:"succes"}),setTimeout((function(){return C({text:"",type:""})}),5e3)})).catch((function(e){console.log(e.response),C({text:"Added ".concat(e.response.data.error),type:"error"}),setTimeout((function(){return C({text:"",type:""})}),5e3)})),b(""),O("")},setNewName:b,newName:l,setNewNumber:O,newNumber:x}),Object(a.jsx)("h3",{children:"Numbers"}),Object(a.jsx)(d,{persons:D,handleDelete:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&j.remove(e).then((function(){o(n.filter((function(t){return t.id!==e}))),C({text:"Deleted ".concat(t.name),type:"succes"}),setTimeout((function(){return C({text:"",type:""})}),5e3)})).catch((function(){C({text:"Information of ".concat(t.name," has already been remove from server"),type:"error"}),setTimeout((function(){return C({text:"",type:""})}),5e3),o(n.filter((function(e){return e.id!==t.id})))}))}})]})};c.a.render(Object(a.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.fe2aa6f1.chunk.js.map